import{MongoClient as a}from"mongodb";const i=process.env.MONGODB_URL,t=new a(i);t.connect().then(()=>{console.log("[Connected to MongoDB]")}).catch(o=>{console.error("[Error connecting to MongoDB]: ",o)});const p=async o=>{console.log("production");const n=o.request.url,e=n.split("=")[1];console.log("params",e,n.split("="));const c=t.db().collection("anime"),s=[{$search:{index:"synonyms_anime",autocomplete:{query:e||"A",path:"synonyms"}}},{$limit:15},{$project:{_id:1,title:1,tags:1,picture:1}}],r=await c.aggregate(s).toArray();return Response.json(r)};export{p as GET};
